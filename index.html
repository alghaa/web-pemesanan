<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Form Pemesanan</title>
    <style>
        body { font-family: Arial; margin: 40px; }
        input, textarea, button { width: 100%; padding: 10px; margin: 8px 0; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ccc; padding: 10px; text-align: left; }
        th { background: #f2f2f2; }
        .total-box { font-size: 20px; margin-top: 10px; }
    </style>
</head>
<body>

<h2>Form Pemesanan</h2>

<input id="nama" placeholder="Nama">
<input id="pesanan" placeholder="Nama Pesanan (contoh: Nasi Goreng)">
<input id="harga" placeholder="Harga (contoh: 15000)" type="number">
<textarea id="catatan" placeholder="Catatan (opsional)"></textarea>

<button onclick="kirimPesanan()">Kirim</button>

<h2>Daftar Pesanan</h2>
<table id="tabelPesanan">
    <tr>
        <th>Nama</th>
        <th>Pesanan</th>
        <th>Harga</th>
        <th>Catatan</th>
    </tr>
</table>

<h2>Daftar Harga</h2>
<table id="tabelHarga">
    <tr>
        <th>Pesanan</th>
        <th>Harga</th>
    </tr>
</table>

<h2>Total Harga</h2>
<div class="total-box" id="totalHarga">Rp 0</div>


<script>
    function loadData() {
        const pesanan = JSON.parse(localStorage.getItem("pesanan") || "[]");

        const tabelPesanan = document.getElementById("tabelPesanan");
        const tabelHarga = document.getElementById("tabelHarga");
        let total = 0;

        // Reset tabel (biarkan header)
        tabelPesanan.innerHTML = `
            <tr>
                <th>Nama</th>
                <th>Pesanan</th>
                <th>Harga</th>
                <th>Catatan</th>
            </tr>
        `;

        tabelHarga.innerHTML = `
            <tr>
                <th>Pesanan</th>
                <th>Harga</th>
            </tr>
        `;

        pesanan.forEach(data => {
            // isi tabel pesanan
            tabelPesanan.innerHTML += `
                <tr>
                    <td>${data.nama}</td>
                    <td>${data.pesanan}</td>
                    <td>Rp ${data.harga}</td>
                    <td>${data.catatan}</td>
                </tr>
            `;

            // isi tabel harga
            tabelHarga.innerHTML += `
                <tr>
                    <td>${data.pesanan}</td>
                    <td>Rp ${data.harga}</td>
                </tr>
            `;

            total += Number(data.harga);
        });

        document.getElementById("totalHarga").innerText = "Rp " + total.toLocaleString();
    }

    function kirimPesanan() {
        const nama = document.getElementById("nama").value;
        const pesanan = document.getElementById("pesanan").value;
        const harga = document.getElementById("harga").value;
        const catatan = document.getElementById("catatan").value;

        if (!nama || !pesanan || !harga) {
            alert("Nama, pesanan, dan harga wajib diisi!");
            return;
        }

        let data = JSON.parse(localStorage.getItem("pesanan") || "[]");

        data.push({ nama, pesanan, harga, catatan });

        localStorage.setItem("pesanan", JSON.stringify(data));

        // reset input
        document.getElementById("nama").value = "";
        document.getElementById("pesanan").value = "";
        document.getElementById("harga").value = "";
        document.getElementById("catatan").value = "";

        loadData();
    }

    loadData();
</script>

</body>
</html>
