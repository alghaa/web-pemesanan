<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Kasir</title>
<style>
    body {
        font-family: Arial;
        margin: 10px;
        padding: 0;
    }

    h2 {
        font-size: 20px;
        margin-top: 20px;
    }

    input, textarea, button, select {
        width: 100%;
        padding: 10px;
        margin: 8px 0;
        font-size: 16px;
        box-sizing: border-box;
    }

    button {
        background: #ddd;
        border: 1px solid #bbb;
    }

    /* TABEL RESPONSIF */
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        font-size: 14px;
        table-layout: fixed; /* penting supaya pas di HP */
        word-wrap: break-word; /* teks otomatis turun */
    }

    th, td {
        border: 1px solid #ccc;
        padding: 8px;
        text-align: left;
    }

    th {
        background: #f2f2f2;
        font-size: 14px;
    }

    .total-box {
        font-size: 18px;
        margin-top: 10px;
        font-weight: bold;
    }

    /* AGAR TAMPILAN BAGUS DI HP */
    @media (max-width: 480px) {
        h2 { font-size: 18px; }

        th, td {
            padding: 6px;
            font-size: 12px;
        }

        button {
            font-size: 14px;
            padding: 8px;
        }
    }
</style>

</head>

<body>

<h2>Form Pemesanan</h2>

<label>Nama Makanan:</label>
<select id="makanan" onchange="updateHarga()">
    <option value="">-- Pilih Makanan --</option>
    <option value="Nasi Goreng" data-harga="15000">Nasi Goreng - Rp 15.000</option>
    <option value="Mie Goreng" data-harga="12000">Mie Goreng - Rp 12.000</option>
    <option value="Ayam Geprek" data-harga="18000">Ayam Geprek - Rp 18.000</option>
    <option value="Es Teh" data-harga="5000">Es Teh - Rp 5.000</option>
    <option value="Es Jeruk" data-harga="7000">Es Jeruk - Rp 7.000</option>
</select>

<label>Harga:</label>
<input type="number" id="harga" readonly>

<label>Tanggal:</label>
<input type="date" id="tanggal">

<label>Catatan (opsional):</label>
<input id="catatan" placeholder="Tambahan...">

<button onclick="tambahPesanan()">Tambah Pesanan</button>

<h2>Daftar Pesanan</h2>
<table id="tabel">
    <tr>
        <th>Makanan</th>
        <th>Harga</th>
        <th>Tanggal</th>
        <th>Catatan</th>
    </tr>
</table>

<div class="total" id="totalHarga">Total: Rp 0</div>

<script>
    // Set tanggal default = hari ini
    document.getElementById("tanggal").value = 
        new Date().toISOString().split("T")[0];

    // Update harga otomatis saat pilih makanan
    function updateHarga() {
        const select = document.getElementById("makanan");
        const harga = select.options[select.selectedIndex].dataset.harga || 0;
        document.getElementById("harga").value = harga;
    }

    function loadData() {
        const data = JSON.parse(localStorage.getItem("kasir") || "[]");
        const tabel = document.getElementById("tabel");
        let total = 0;

        tabel.innerHTML = `
            <tr>
                <th>Makanan</th>
                <th>Harga</th>
                <th>Tanggal</th>
                <th>Catatan</th>
            </tr>
        `;

        data.forEach(p => {
            tabel.innerHTML += `
                <tr>
                    <td>${p.makanan}</td>
                    <td>Rp ${Number(p.harga).toLocaleString()}</td>
                    <td>${p.tanggal}</td>
                    <td>${p.catatan}</td>
                </tr>
            `;

            total += Number(p.harga);
        });

        document.getElementById("totalHarga").innerText =
            "Total: Rp " + total.toLocaleString();
    }

    function tambahPesanan() {
        const makanan = document.getElementById("makanan").value;
        const harga = document.getElementById("harga").value;
        const tanggal = document.getElementById("tanggal").value;
        const catatan = document.getElementById("catatan").value;

        if (!makanan || !harga) {
            alert("Silakan pilih makanan terlebih dahulu.");
            return;
        }

        let data = JSON.parse(localStorage.getItem("kasir") || "[]");

        data.push({ makanan, harga, tanggal, catatan });

        localStorage.setItem("kasir", JSON.stringify(data));

        document.getElementById("makanan").value = "";
        document.getElementById("harga").value = "";
        document.getElementById("catatan").value = "";

        loadData();
    }

    loadData();
</script>

</body>
</html>
